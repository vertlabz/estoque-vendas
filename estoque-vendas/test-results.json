{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":2,"numPassedTests":23,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":3,"numTotalTests":24,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1754684075582,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["API Comandas","GET /api/comandas"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas GET /api/comandas lista comandas abertas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075748,"status":"passed","title":"lista comandas abertas"},{"ancestorTitles":["API Comandas","GET /api/comandas"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas GET /api/comandas retorna erro ao listar","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075752,"status":"passed","title":"retorna erro ao listar"},{"ancestorTitles":["API Comandas","POST /api/comandas"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas cria comanda com sucesso","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754684075774,"status":"passed","title":"cria comanda com sucesso"},{"ancestorTitles":["API Comandas","POST /api/comandas"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas retorna erro ao criar comanda","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075775,"status":"passed","title":"retorna erro ao criar comanda"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas/:id/finalize rejeita método não permitido","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075782,"status":"passed","title":"rejeita método não permitido"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":3,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":400,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 400\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 400\nReceived: 404\n    at Object.toBe (/workspaces/estoque-vendas/estoque-vendas/tests/api/comandas.test.js:101:30)"],"fullName":"API Comandas POST /api/comandas/:id/finalize valida ausência de método de pagamento","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754684075783,"status":"failed","title":"valida ausência de método de pagamento"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas/:id/finalize retorna 404 se comanda não existir","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754684075786,"status":"passed","title":"retorna 404 se comanda não existir"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas/:id/finalize finaliza comanda com sucesso","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754684075787,"status":"passed","title":"finaliza comanda com sucesso"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas/:id/finalize retorna erro ao buscar comanda","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075788,"status":"passed","title":"retorna erro ao buscar comanda"},{"ancestorTitles":["API Comandas","POST /api/comandas/:id/finalize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas POST /api/comandas/:id/finalize retorna erro na transação","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075791,"status":"passed","title":"retorna erro na transação"},{"ancestorTitles":["API Comandas","Items handler"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler adiciona item à comanda","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075793,"status":"passed","title":"adiciona item à comanda"},{"ancestorTitles":["API Comandas","Items handler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler valida campos obrigatórios ao adicionar","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075794,"status":"passed","title":"valida campos obrigatórios ao adicionar"},{"ancestorTitles":["API Comandas","Items handler"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler erro ao adicionar item","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075794,"status":"passed","title":"erro ao adicionar item"},{"ancestorTitles":["API Comandas","Items handler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler atualiza item da comanda","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075799,"status":"passed","title":"atualiza item da comanda"},{"ancestorTitles":["API Comandas","Items handler"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler valida campos obrigatórios ao atualizar","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075799,"status":"passed","title":"valida campos obrigatórios ao atualizar"},{"ancestorTitles":["API Comandas","Items handler"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler erro ao atualizar item","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075800,"status":"passed","title":"erro ao atualizar item"},{"ancestorTitles":["API Comandas","Items handler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler remove item da comanda","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075802,"status":"passed","title":"remove item da comanda"},{"ancestorTitles":["API Comandas","Items handler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler valida itemId ao remover","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075803,"status":"passed","title":"valida itemId ao remover"},{"ancestorTitles":["API Comandas","Items handler"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler erro ao remover item","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075803,"status":"passed","title":"erro ao remover item"},{"ancestorTitles":["API Comandas","Items handler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Comandas Items handler método não permitido","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075805,"status":"passed","title":"método não permitido"}],"endTime":1754684075829,"message":"  ● API Comandas › POST /api/comandas/:id/finalize › valida ausência de método de pagamento\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 400\n    Received: 404\n\n       99 |       const res = mockRes();\n      100 |       await finalizeHandler(req, res);\n    > 101 |       expect(res.statusCode).toBe(400);\n          |                              ^\n      102 |       expect(res.body).toEqual({ message: 'Método de pagamento é obrigatório' });\n      103 |     });\n      104 |\n\n      at Object.toBe (tests/api/comandas.test.js:101:30)\n","name":"/workspaces/estoque-vendas/estoque-vendas/tests/api/comandas.test.js","startTime":1754684075611,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["POST /api/sales"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"POST /api/sales desconta estoque e cria venda quando há estoque suficiente","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1754684075906,"status":"passed","title":"desconta estoque e cria venda quando há estoque suficiente"},{"ancestorTitles":["POST /api/sales"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"POST /api/sales retorna 400 se não houver estoque suficiente","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1754684075918,"status":"passed","title":"retorna 400 se não houver estoque suficiente"}],"endTime":1754684075926,"message":"","name":"/workspaces/estoque-vendas/estoque-vendas/tests/api/sales/stock.test.js","startTime":1754684075858,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["POST /api/auth/login"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"POST /api/auth/login retorna 401 em credenciais inválidas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075957,"status":"passed","title":"retorna 401 em credenciais inválidas"},{"ancestorTitles":["POST /api/auth/login"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"POST /api/auth/login retorna 200 e token em credenciais válidas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754684075958,"status":"passed","title":"retorna 200 e token em credenciais válidas"}],"endTime":1754684075959,"message":"","name":"/workspaces/estoque-vendas/estoque-vendas/tests/api/auth/login.test.js","startTime":1754684075931,"status":"passed","summary":""}],"wasInterrupted":false}
